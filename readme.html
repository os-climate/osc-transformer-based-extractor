<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>OSC Transformer Based Extractor &#8212; osc-transformer-based-extractor unknown documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=0ca6144b" />
    <script src="_static/documentation_options.js?v=3f1b9271"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="contributing.html" />
    <link rel="prev" title="osc-transformer-based-extractor" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="osc-transformer-based-extractor">
<span id="readme"></span><h1>OSC Transformer Based Extractor<a class="headerlink" href="#osc-transformer-based-extractor" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://os-climate.org/"><img alt="An OS-Climate Project" src="https://img.shields.io/badge/OS-Climate-blue" /></a> <a class="reference external" href="https://os-climate.slack.com"><img alt="Join OS-Climate on Slack" src="https://img.shields.io/badge/slack-osclimate-brightgreen.svg?logo=slack" /></a> <a class="reference external" href="https://github.com/ModeSevenIndustrialSolutions/osc-data-extractor"><img alt="Source code on GitHub" src="https://img.shields.io/badge/GitHub-100000?logo=github&amp;logoColor=white" /></a> <a class="reference external" href="https://pypi.org/project/osc-data-extractor/"><img alt="PyPI package" src="https://img.shields.io/pypi/v/osc-data-extractor.svg" /></a> <a class="reference external" href="https://cirrus-ci.com/github/os-climate/osc-data-extractor"><img alt="Built Status" src="https://api.cirrus-ci.com/github/os-climate/osc-data-extractor.svg?branch=main" /></a> <a class="reference external" href="https://pdm-project.org/latest/"><img alt="Built using PDM" src="https://img.shields.io/badge/PDM-Project-purple" /></a> <a class="reference external" href="https://pyscaffold.org/"><img alt="Project generated with PyScaffold" src="https://img.shields.io/badge/-PyScaffold-005CA0?logo=pyscaffold" /></a></p>
<section id="os-climate-data-extraction-tool">
<h2>OS-Climate Data Extraction Tool<a class="headerlink" href="#os-climate-data-extraction-tool" title="Link to this heading">¶</a></h2>
<p>This project provides an CLI tool and python scripts to train a HuggingFace Transformer model or a local Transformer model and perform inference with it. The primary goal of the inference is to determine the relevance between a given question and context.</p>
<section id="quick-start">
<h3>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">¶</a></h3>
<p>To install the OSC Transformer Based Extractor CLI, use pip:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>osc-transformer-based-extractor
</pre></div>
</div>
<p>Afterwards you can use the tooling as a CLI tool by simply typing:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>osc-transformer-based-extractor
</pre></div>
</div>
<p>We are using typer to have a nice CLI tool here. All details and help will be shown in the CLI
tool itself and are not described here in more detail.</p>
<p><strong>Example</strong>: Assume the folder structure is like that:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>project/
│
├── kpi_mapping.csv
├── training_data.csv
├── data/
│   └── (json files for inference command)
├── model/
│   └── (model-related files go here)
|── saved__model/
|   └── (output files trained models)
├── output/
│   └── (ouput files from inference command)
</pre></div>
</div>
<p>Then you can now simply run (after installation of osc-transformer-based-extractor)
the following command to fine-tune the model on the data:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>osc-transformer-based-extractor<span class="w"> </span>relevance-detector<span class="w"> </span>fine-tune<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--data_path<span class="w"> </span><span class="s2">&quot;project/training_data.csv&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--model_name<span class="w"> </span><span class="s2">&quot;bert-base-uncased&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--num_labels<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--max_length<span class="w"> </span><span class="m">128</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--epochs<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--batch_size<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output_dir<span class="w"> </span><span class="s2">&quot;project/saved__model/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--save_steps<span class="w"> </span><span class="m">500</span>
</pre></div>
</div>
<p>Also, the following command can be run to perform inference:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>osc-transformer-based-extractor<span class="w"> </span>relevance-detector<span class="w"> </span>perform-inference<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--folder_path<span class="w"> </span><span class="s2">&quot;project/data/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--kpi_mapping_path<span class="w"> </span><span class="s2">&quot;project/kpi_mapping.csv&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output_path<span class="w"> </span><span class="s2">&quot;project/output/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--model_path<span class="w"> </span><span class="s2">&quot;project/model/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tokenizer_path<span class="w"> </span><span class="s2">&quot;project/model/&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--threshold<span class="w"> </span><span class="m">0</span>.5
</pre></div>
</div>
</section>
</section>
<section id="training-data">
<h2>Training Data<a class="headerlink" href="#training-data" title="Link to this heading">¶</a></h2>
<section id="training-file">
<h3>Training File<a class="headerlink" href="#training-file" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>To train the model, you need a CSV file with columns:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Question</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Context</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Label</span></code></p></li>
</ul>
</dd>
</dl>
<p>Also additionally, the output of the <a class="reference external" href="https://github.com/os-climate/osc-transformer-presteps">https://github.com/os-climate/osc-transformer-presteps</a> module can also be used. the output will look like following
Sample Data:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">traning_Data.csv</span><a class="headerlink" href="#id1" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Question</p></th>
<th class="head"><p>Context</p></th>
<th class="head"><p>Label</p></th>
<th class="head"><p>Company</p></th>
<th class="head"><p>Source File</p></th>
<th class="head"><p>Source Page</p></th>
<th class="head"><p>KPI ID</p></th>
<th class="head"><p>Year</p></th>
<th class="head"><p>Answer</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Annotator</p></th>
<th class="head"><p>Index</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>What is the company name?</p></td>
<td><p>The Company is exposed to a risk of by losses counterparties their contractual financial obligations when due, and in particular depends on the reliability of banks the Company deposits its available cash.</p></td>
<td><p>0</p></td>
<td><p>NOVATEK</p></td>
<td><p>04_NOVATEK_AR_2016_ENG_11.pdf</p></td>
<td><p>[‘0’]</p></td>
<td><p>0</p></td>
<td><p>2016</p></td>
<td><p>PAO NOVATEK</p></td>
<td><p>TEXT</p></td>
<td><p>train_anno_large.xlsx</p></td>
<td><p>1022</p></td>
</tr>
</tbody>
</table>
</section>
<section id="kpi-mapping-file">
<h3>KPI Mapping File<a class="headerlink" href="#kpi-mapping-file" title="Link to this heading">¶</a></h3>
<p>The Inference command will need a kpi-mapping.csv file, which looks like:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">kpi_mapping.csv</span><a class="headerlink" href="#id2" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>kpi_id</p></th>
<th class="head"><p>question</p></th>
<th class="head"><p>sectors</p></th>
<th class="head"><p>add_year</p></th>
<th class="head"><p>kpi_category</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>In which year was the annual report or the sustainability report published?</p></td>
<td><p>OG, CM, CU</p></td>
<td><p>FALSE</p></td>
<td><p>TEXT</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="developer-notes">
<h2>Developer Notes<a class="headerlink" href="#developer-notes" title="Link to this heading">¶</a></h2>
<section id="use-code-directly-without-cli-via-github-repository">
<h3>Use code directly without CLI via Github Repository<a class="headerlink" href="#use-code-directly-without-cli-via-github-repository" title="Link to this heading">¶</a></h3>
<p>First clone the repository to your local environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/os-climate/osc-transformer-based-extractor/
</pre></div>
</div>
<p>We are using pdm to manage the packages and tox for a stable test framework.
Hence, first install pdm (possibly in a virtual environment) via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pdm
</pre></div>
</div>
<p>Afterwards sync you system via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pdm sync
</pre></div>
</div>
<p>Now you have multiple demos on how to go on. See folder
[here](demo)</p>
<section id="pdm">
<h4>pdm<a class="headerlink" href="#pdm" title="Link to this heading">¶</a></h4>
<p>For adding new dependencies use pdm. You could add new packages via pdm add.
For example numpy via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pdm add numpy
</pre></div>
</div>
<p>For a very detailed description check the homepage of the pdm project:</p>
<p><a class="reference external" href="https://pdm-project.org/en/latest/">https://pdm-project.org/en/latest/</a></p>
</section>
<section id="tox">
<h4>tox<a class="headerlink" href="#tox" title="Link to this heading">¶</a></h4>
<p>For running linting tools we use tox which you run outside of your virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install tox
$ tox -e lint
$ tox -e test
</pre></div>
</div>
<p>This will automatically apply some checks on your code and run the provided pytests. See
more details on tox on the homepage of the tox project:</p>
<p><a class="reference external" href="https://tox.wiki/en/4.16.0/">https://tox.wiki/en/4.16.0/</a></p>
</section>
</section>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">¶</a></h2>
<p>Contributions are welcome! Please fork the repository and submit a pull request for any enhancements or bug fixes.</p>
<p>All contributions (including pull requests) must agree to the Developer Certificate of Origin (DCO) version 1.1. This is exactly the same one created and used by the Linux kernel developers and posted on <a class="reference external" href="http://developercertificate.org/">http://developercertificate.org/</a>. This is a developer’s certification that he or she has the right to submit the patch for inclusion into the project. Simply submitting a contribution implies this agreement, however, please include a “Signed-off-by” tag in every patch (this tag is a conventional way to confirm that you agree to the DCO).</p>
<p>On June 26 2024, Linux Foundation announced the merger of its financial services umbrella, the Fintech Open Source Foundation ([FINOS](<a class="reference external" href="https://finos.org">https://finos.org</a>)), with OS-Climate, an open source community dedicated to building data technologies, modeling, and analytic tools that will drive global capital flows into climate change mitigation and resilience; OS-Climate projects are in the process of transitioning to the [FINOS governance framework](<a class="reference external" href="https://community.finos.org/docs/governance">https://community.finos.org/docs/governance</a>); read more on [finos.org/press/finos-join-forces-os-open-source-climate-sustainability-esg](<a class="reference external" href="https://finos.org/press/finos-join-forces-os-open-source-climate-sustainability-esg">https://finos.org/press/finos-join-forces-os-open-source-climate-sustainability-esg</a>)</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">osc-transformer-based-extractor</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#os-climate-data-extraction-tool">OS-Climate Data Extraction Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#training-data">Training Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#developer-notes">Developer Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributions &amp; Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">Module Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">osc-transformer-based-extractor</a></li>
      <li>Next: <a href="contributing.html" title="next chapter">Contributing</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, Matthew Watkins.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/readme.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>